<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Issue List</title>
  <meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;">
  <link href="/static/helpdoc/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <!-- Custom styles for this template -->
  <link href="/static/helpdoc/vendor/css/2-col-portfolio.css" rel="stylesheet">
</head>
<style>
@import url(https://fonts.googleapis.com/css?family=Roboto:400,500,700,300,100);
body {
  background-color: #3e94ec00;
  font-family: "Roboto", helvetica, arial, sans-serif;
  font-size: 16px;
  font-weight: 400;
  text-rendering: optimizeLegibility;
}

div.table-title {
  display: block;
  margin: auto;
  max-width: 900px;
  padding:5px;
  width: 100%;
}


/*** Table Styles **/

.table-fill {
  background: white;
  border-radius:3px;
  border-collapse: collapse;
  height: 320px;
  margin: auto;
  max-width: 1200px;
  padding:5px;
  width: 100%;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
  animation: float 5s infinite;
  position: relative;
  top: 8%;
}
input[type=date]::-webkit-inner-spin-button {
    -webkit-appearance: none;}
 
th {
  color:#D5DDE5;
  background:#1b1e24;
  border-bottom:4px solid #9ea7af;
  border-right: 1px solid #343a45;
  font-size:20px;
  font-weight: 100;
  padding:10px;
  text-align:left;
  vertical-align:middle;
}

th:first-child {
  border-top-left-radius:3px;
}
 
th:last-child {
  border-top-right-radius:3px;
  border-right:none;
}
  
tr {
  border-top: 1px solid #C1C3D1;
  border-bottom-: 1px solid #C1C3D1;
  color:#000000;
  font-size:16px;
}
 
tr:hover td {
  background:#4E5066;
  color:#FFFFFF;
  border-top: 1px solid #22262e;
}
 
tr:first-child {
  border-top:none;
}

tr:last-child {
  border-bottom:none;
}
 
tr:last-child td:first-child {
  border-bottom-left-radius:3px;
}
 
tr:last-child td:last-child {
  border-bottom-right-radius:3px;
}
 
td {
  background:#ebebeb00;
  padding:10px;
  text-align:left;
  vertical-align:middle;
  font-size:14px;
  border-right: 1px solid #C1C3D1;
}

td:last-child {
  border-right: 0px;
}

th.text-left {
  text-align: left;
}
td.text-left1 {
  text-align: left;
  background-color:#E9967A;
}
th.text-center {
  text-align: center;
}

th.text-right {
  text-align: right;
}

td.text-left {
  text-align: left;
}

td.text-center {
  text-align: center;
}

td.text-right {
  text-align: right;
}
#contact{
  position: absolute;
  right: 05%;
  top: 05%;
}
#count{
  position: absolute;
  left: 10%;
  top: 10%; 
  background-color:#FFFF00 ;
}
#manage{
  width:16%;
  height:23px;
}
.bg-dark {
    background-color: #1eb7d5!important;
}

</style>


<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">Issue list</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="https://helpdoc.herokuapp.com/index/"><b>Home</b>
                <span class="sr-only">(current)</span>
              </a>
            </li>
            {% if user.is_authenticated %}
            <li class="nav-item active">
              <a class="nav-link" href="{% url 'helpdoc:creaissue' %}">Create New</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
<div class="table-title">
<form id="contact" action="{% url 'helpdoc:issue' %}" method="post" enctype="multipart/form-data">
  <h5>Filter by:</h5>
<input type="date" name="date1" id="manage" />
<input type="date" name="date2" id="manage" />
<select name="tag" id="tag">
<option value="All">All</option>
<option value="Q issue">Q</option>
<option value="kite issue">Kite</option>
<option value="Pi issue">Pi</option>
<option value="Nest issue">Nest</option>
<option value="kite/Pi/Nest">Kite/Pi/Nest</option>
</select>
<select name="tag2" id="tag2">
<option >Please select from first</option>
</select>
<select name="tag3" id="tag3">
<option value="All">All</option>
<option value="Human">Human</option>
<option value="Service">Service Provider</option>
<option value="API">API</option>
</select>
<input value="search" input type="submit"/>
</div>
</form>
<table class="table-fill">
<thead>
<tr>
<th class="text-left">Date</th>
<th class="text-left">Tag</th>
<th class="text-left">Issue</th>
<th class="text-left">Issue Period</th>
<th class="text-left">Effected Platform</th>
<th class="text-left">Resolution step</th>

</tr>
</thead>
<tbody class="table-hover">
{% for content in issue %}  
{% if content.critical == "High" %}
<tr> 
<td class="text-left1" >{{content.date}}</td>
<td class="text-left1">{{content.tag}}-{{content.tag2}}</td>
<td class="text-left1">{{content.detail}}</td>
<td class="text-left1">{{content.rectify}}</td>
<td class="text-left1">{{content.effected}}</td>
<td class="text-left1">{{content.resolution}}</td>
</tr>
{% else %}
<tr> 
<td class="text-left">{{content.date}}</td>
<td class="text-left">{{content.tag}}-{{content.tag2}}</td>
<td class="text-left">{{content.detail}}</td>
<td class="text-left">{{content.rectify}}</td>
<td class="text-left">{{content.effected}}</td>
<td class="text-left">{{content.resolution}}</td>
</tr>
{% endif %}
{% endfor %}
</tbody>
</table>
<h3 id="count">Total-{{ issue.count }}</h3>  
<script>
$(function() {
$("#tag").change(function() {

  var $dropdown = $(this);

  $.getJSON("jsondata", function(data) {
  
    var key = $dropdown.val();
    var vals = [];
              
    switch(key) {
      case 'Q issue':
        vals = data.Q.split(",");
        break;
      case 'kite issue':
        vals = data.kite.split(",");
        break;
      case 'Pi issue':
        vals = data.Pi.split(",");
        break;
      case 'Nest issue':
        vals = data.Nest.split(",");
        break;
      case 'kite/Pi/Nest':
        vals = data.Main.split(",");
        break;
      case 'All':
        vals = data.All.split(",");
        break;      
    }
    
    var $tag2 = $("#tag2");
    $tag2.empty();
    $.each(vals, function(creaissue,value) {
      $tag2.append("<option>" + value + "</option>");
    });

  });
});
});

</script>
</body>